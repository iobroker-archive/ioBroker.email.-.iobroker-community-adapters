import{A as u,i as s}from"./ActionSendEmail__mf_v__runtimeInit__mf_v__-eLULivoH.js";const{loadShare:_}=s,{initPromise:m}=u,f=m.then(t=>_("@iobroker/adapter-react-v5",{customShareInfo:{shareConfig:{singleton:!0,strictVersion:!1,requiredVersion:"*"}}})),p=await f.then(t=>t());var b=p,n={},c={};Object.defineProperty(c,"__esModule",{value:!0});let k=class{};c.default=k;var l={};Object.defineProperty(l,"__esModule",{value:!0});(function(t){var e=n&&n.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.IGenericBlock=t.GenericBlock=void 0;var r=c;Object.defineProperty(t,"GenericBlock",{enumerable:!0,get:function(){return e(r).default}});var d=l;Object.defineProperty(t,"IGenericBlock",{enumerable:!0,get:function(){return d.IGenericBlock}})})(n);const i=window.GenericBlock||n.GenericBlock;class o extends i{constructor(e){super(e,o.getStaticData())}static compile(e,r){return e.recipients?`// Send Email ${e.text||""}
		const subActionVar${e._id} = "${(e.text||"").replace(/"/g,'\\"')}"${i.getReplacesInText(r)};
		_sendToFrontEnd(${e._id}, {text: subActionVar${e._id}});
		sendTo("${e.instance||"email.0"}", {
		    to:      "${e.recipients||""}",
		    subject: "${(e.subject||"ioBroker").replace(/"/g,'\\"')}"${i.getReplacesInText(r)},
		    text:    subActionVar${e._id}
		});`:`// no recipients defined'
_sendToFrontEnd(${e._id}, {text: 'No recipients defined'});`}renderDebug(e){return`${b.I18n.t("Sent:")} ${e.data.text}`}onTagChange(){this.setState({inputs:[{attr:"instance",nameRender:"renderInstance",defaultValue:"email.0",frontText:"Instance:",adapter:"email"},{attr:"recipients",nameRender:"renderText",defaultValue:"user@mail.ru",frontText:"To:"},{attr:"subject",nameRender:"renderText",defaultValue:"Email from iobroker",nameBlock:"",frontText:"Subject:"},{attr:"text",nameRender:"renderModalInput",defaultValue:"Email from iobroker",nameBlock:"",frontText:"Body:"}]},()=>super.onTagChange())}static getStaticData(){return{acceptedBy:"actions",name:"Send email",id:"ActionSendEmail",adapter:"email",title:"Sends an email",helpDialog:"You can use %s in the text to display current trigger value or %id to display the triggered object ID"}}getData(){return o.getStaticData()}}export{o as default};
